#include "lora_size.h"


/**
 * Max uplink MACPayload sizes by region and DR
 * Source: LoRaWAN Regional Parameters
 * Index = DR
 */
static const uint8_t max_payload[][16] = {
    /* AS923 */
    { 51, 51, 51, 115, 242, 242, 242, 0, 0, 0, 0, 0, 0, 0, 0, 0 },

    /* AU915 */
    { 19, 61, 133, 250, 250, 0, 0, 0, 61, 137, 250, 250, 0, 0, 0, 0 },

    /* CN470 */
    { 51, 51, 51, 115, 242, 242, 242, 242, 0, 0, 0, 0, 0, 0, 0, 0 },

    /* CN779 */
    { 51, 51, 51, 115, 242, 242, 242, 0, 0, 0, 0, 0, 0, 0, 0, 0 },

    /* EU433 */
    { 51, 51, 51, 115, 242, 242, 242, 0, 0, 0, 0, 0, 0, 0, 0, 0 },

    /* EU868 */
    { 51, 51, 51, 115, 242, 242, 242, 242, 0, 0, 0, 0, 0, 0, 0, 0 },

    /* KR920 */
    { 51, 51, 51, 115, 242, 242, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 },

    /* IN865 */
    { 51, 51, 51, 115, 242, 242, 242, 0, 0, 0, 0, 0, 0, 0, 0, 0 },

    /* US915 */
    { 19, 61, 133, 250, 250, 0, 0, 0, 61, 137, 250, 250, 0, 0, 0, 0 },

    /* RU864 */
    { 51, 51, 51, 115, 242, 242, 242, 0, 0, 0, 0, 0, 0, 0, 0, 0 }
};




uint8_t lorawan_max_payload(unsigned int region, int8_t dr) {
    if (region >= sizeof(max_payload) || dr >= 16)
        return 0;

    return max_payload[region][dr];
}
